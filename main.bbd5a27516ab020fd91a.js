(()=>{"use strict";var t,e=new Uint8Array(16);function o(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}const r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,n=function(t){return"string"==typeof t&&r.test(t)};for(var a=[],i=0;i<256;++i)a.push((i+256).toString(16).substr(1));const s=function(t,e,r){var i=(t=t||{}).random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=i[s];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase();if(!n(o))throw TypeError("Stringified UUID is invalid");return o}(i)};class d{constructor(t,e,o,r){this.author=e,this.title=t,this.pageCount=o,this.read=r,this.id=s()}getID(){return this.id}getAuthor(){return this.author}getTitle(){return this.title}getPageCount(){return this.pageCount}hasRead(){return this.read}setAuthor(t){this.author=t}setTitle(t){this.title=t}setPageCount(t){this.pageCount=t}setRead(t){this.read=t}toggleRead(){this.read=!this.read}}class u{constructor(t){console.log(t),this.book=t,this.domObject=null;const e=document.getElementById("templateBookCard").cloneNode(!0),o=t.getID();e.removeAttribute("id"),e.setAttribute("data-book-id",o);const r=e.querySelector(".book-title"),n=e.querySelector(".author-name"),a=e.querySelector(".page-count"),i=e.querySelector(".finished-checkbox");r.textContent=t.getTitle(),n.textContent=t.getAuthor(),a.textContent=t.getPageCount(),i.setAttribute("data-value",`${t.hasRead()}`);const s=e.querySelector(".edit-button"),d=e.querySelector(".del-button");this.domObject={container:e,editButton:s,deleteButton:d,titleLabel:r,authorLabel:n,pageLabel:a,finishedCheckbox:i}}insertDOM(){document.getElementById("libraryContainer").appendChild(this.domObject.container)}removeDOM(){const t=this.domObject.container;if(t.parentNode){t.parentNode.removeChild(t);const e=Object.keys(this.domObject);for(let t=0;t<e.length;++t){const o=e[t];this.domObject[o]=null}this.domObject=null}}updateInformation(){}getDeleteButton(){return this.domObject.deleteButton}getEditButton(){return this.domObject.editButton}}class l{static bookCardMap=new Map;static controller=null;static register(t){l.controller=t}static render(t){for(let e in t){const t=e.getID();!bookCardMap.has(t)||bookCardMap.get(t)}}static removeBook(t){console.log(`Removing book ${t}`),l.bookCardMap.has(t)||console.error(`Book is already removed from DOM (id ${t})`),console.log("\tRemoving from DOM"),l.bookCardMap.get(t).removeDOM(),console.log("\tRemoving from Map"),l.bookCardMap.delete(t)}static addBook(t){if(l.bookCardMap.has(t.getID()))return void console.error(`Book already exists (id ${t.getID()})`);const e=new u(t),o=e.getEditButton(),r=e.getDeleteButton();let n,a;n=()=>{},a=()=>{l.controller.deleteBook(t.getID()),r.removeEventListener("click",a),o.removeEventListener("click",n)},o.addEventListener("click",n),r.addEventListener("click",a),l.bookCardMap.set(t.getID(),e),e.insertDOM()}static editBook(t,e){}}class c{static bookList=[];static addBook(t){const{title:e,author:o,pageCount:r,hasRead:n}=t,a=new d(e,o,r,n);c.bookList.push(a),l.addBook(a)}static removeBook(t){c.bookList=c.bookList.filter((e=>e.getID()!==t)),l.removeBook(t)}static editBook(t,e){c.bookList.find((e=>e.getID()===t));const{title:o,author:r,pageCount:n,hasRead:a}=e}}class h{static deleteBook(t){c.removeBook(t)}static addBook(t){c.addBook(t)}}!async function(){let t=!1,e=(o,r)=>{t||(t=!0,o("It's loaded!"),window.removeEventListener("load",e))};await new Promise(e);const o=[{title:"Common Sense Manual",author:"Naseer R.",pageCount:1,hasRead:!1},{title:"Apex Guide",author:"Captain Po",pageCount:100,hasRead:!0},{title:"Random Book",author:"muna",pageCount:1e3,hasRead:!1},{title:"Big Book",author:"muna",pageCount:99999,hasRead:!0}];l.register(h);for(let t=0;t<o.length;++t){const e=o[t];h.addBook(e)}}()})();